{"version":3,"sources":["../../../../src/nest-modules/shared-module/not-found/not-found-error.filter.spec.ts"],"sourcesContent":["import { Entity } from '@core/shared/domain/entity';\nimport { Controller, Get, INestApplication } from '@nestjs/common';\nimport { NotFoundError } from '@core/shared/domain/errors/not-found.error';\nimport { Test, TestingModule } from '@nestjs/testing';\nimport request from 'supertest';\nimport { NotFoundErrorFilter } from './not-found-error.filter';\n\nclass StubEntity extends Entity {\n  entity_id: any;\n\n  toJSON() {\n    return {};\n  }\n}\n\n@Controller('stub')\nclass StubController {\n  @Get()\n  index() {\n    throw new NotFoundError('fake id', StubEntity);\n  }\n}\n\ndescribe('NotFoundFilter Unit Tests ', () => {\n  let app: INestApplication;\n\n  beforeEach(async () => {\n    const moduleFixture: TestingModule = await Test.createTestingModule({\n      controllers: [StubController],\n    }).compile();\n    app = moduleFixture.createNestApplication();\n    app.useGlobalFilters(new NotFoundErrorFilter());\n    await app.init();\n  });\n\n  it('should catch a EntityValidationError', () => {\n    return request(app.getHttpServer()).get('/stub').expect(404).expect({\n      statusCode: 404,\n      error: 'Not Found',\n      message: 'StubEntity Not Found using ID fake id',\n    });\n  });\n});\n"],"names":["StubEntity","Entity","toJSON","StubController","index","NotFoundError","Get","Controller","describe","app","beforeEach","moduleFixture","Test","createTestingModule","controllers","compile","createNestApplication","useGlobalFilters","NotFoundErrorFilter","init","it","request","getHttpServer","get","expect","statusCode","error","message"],"mappings":";;;;wBAAuB;wBAC2B;+BACpB;yBACM;kEAChB;qCACgB;;;;;;;;;;;;;;;AAEpC,IAAA,AAAMA,aAAN,MAAMA,mBAAmBC,cAAM;IAG7BC,SAAS;QACP,OAAO,CAAC;IACV;AACF;AAEA,IAAA,AACMC,iBADN,MACMA;IAEJC,QAAQ;QACN,MAAM,IAAIC,4BAAa,CAAC,WAAWL;IACrC;AACF;;IAJGM,IAAAA,WAAG;;;;GADAH;AAAAA;IADLI,IAAAA,kBAAU,EAAC;GACNJ;AAONK,SAAS,8BAA8B;IACrC,IAAIC;IAEJC,WAAW;QACT,MAAMC,gBAA+B,MAAMC,aAAI,CAACC,mBAAmB,CAAC;YAClEC,aAAa;gBAACX;aAAe;QAC/B,GAAGY,OAAO;QACVN,MAAME,cAAcK,qBAAqB;QACzCP,IAAIQ,gBAAgB,CAAC,IAAIC,wCAAmB;QAC5C,MAAMT,IAAIU,IAAI;IAChB;IAEAC,GAAG,wCAAwC;QACzC,OAAOC,IAAAA,kBAAO,EAACZ,IAAIa,aAAa,IAAIC,GAAG,CAAC,SAASC,MAAM,CAAC,KAAKA,MAAM,CAAC;YAClEC,YAAY;YACZC,OAAO;YACPC,SAAS;QACX;IACF;AACF"}