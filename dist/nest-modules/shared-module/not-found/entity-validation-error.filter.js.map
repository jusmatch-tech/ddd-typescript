{"version":3,"sources":["../../../../src/nest-modules/shared-module/not-found/entity-validation-error.filter.ts"],"sourcesContent":["import { EntityValidationError } from '@core/shared/domain/validators/validation.error';\nimport { ArgumentsHost, Catch, ExceptionFilter } from '@nestjs/common';\nimport { Response } from 'express';\nimport { union } from 'lodash';\n\n@Catch(EntityValidationError)\nexport class EntityValidationErrorFilter implements ExceptionFilter {\n  catch(exception: EntityValidationError, host: ArgumentsHost) {\n    const ctx = host.switchToHttp();\n    const response: Response = ctx.getResponse<Response>();\n    response.status(422).json({\n      statusCode: 422,\n      error: 'Unprocessable Entity',\n      message: union(\n        ...exception.error.reduce(\n          (acc, error) =>\n            acc.concat(\n              typeof error === 'string' ? [[error]] : Object.values(error),\n            ),\n          [],\n        ),\n      ),\n    });\n  }\n}\n"],"names":["EntityValidationErrorFilter","catch","exception","host","ctx","switchToHttp","response","getResponse","status","json","statusCode","error","message","union","reduce","acc","concat","Object","values","Catch","EntityValidationError"],"mappings":";;;;+BAMaA;;;eAAAA;;;iCANyB;wBACgB;wBAEhC;;;;;;;AAGf,IAAA,AAAMA,8BAAN,MAAMA;IACXC,MAAMC,SAAgC,EAAEC,IAAmB,EAAE;QAC3D,MAAMC,MAAMD,KAAKE,YAAY;QAC7B,MAAMC,WAAqBF,IAAIG,WAAW;QAC1CD,SAASE,MAAM,CAAC,KAAKC,IAAI,CAAC;YACxBC,YAAY;YACZC,OAAO;YACPC,SAASC,IAAAA,aAAK,KACTX,UAAUS,KAAK,CAACG,MAAM,CACvB,CAACC,KAAKJ,QACJI,IAAIC,MAAM,CACR,OAAOL,UAAU,WAAW;oBAAC;wBAACA;qBAAM;iBAAC,GAAGM,OAAOC,MAAM,CAACP,SAE1D,EAAE;QAGR;IACF;AACF;AAlBaX;IADZmB,IAAAA,aAAK,EAACC,sCAAqB;GACfpB"}