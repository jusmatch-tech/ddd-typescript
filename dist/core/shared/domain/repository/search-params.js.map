{"version":3,"sources":["../../../../../src/core/shared/domain/repository/search-params.ts"],"sourcesContent":["import { ValueObject } from \"../value-object\";\n\nexport type SortDirection = 'asc' | 'desc';\n\nexport type SearchParamsConstructorProps<Filter = string> = {\n  page?: number;\n  per_page?: number;\n  sort?: string | null;\n  sort_dir?: SortDirection | null;\n  filter?: Filter | null;\n};\n\nexport class SearchParams<Filter = string> extends ValueObject{\n  protected _page: number;\n  protected _per_page: number = 15;\n  protected _sort: string | null;\n  protected _sort_dir: SortDirection | null;\n  protected _filter: Filter | null;\n\n  constructor(props: SearchParamsConstructorProps<Filter> = {}) {\n    super();\n    this.page = props.page;\n    this.per_page = props.per_page;\n    this.sort = props.sort;\n    this.sort_dir = props.sort_dir;\n    this.filter = props.filter;\n  }\n\n  get page() {\n    return this._page;\n  }\n  private set page(value: number) {\n    let _page = +value;\n    if (Number.isNaN(_page) || _page <= 0 || parseInt(_page as any) !== _page) {\n      _page = 1;\n    }\n    this._page = _page;\n  \n  }\n\n  get per_page() {\n    return this._per_page;\n  }\n\n  private set per_page(value: number) {\n    let _per_page = value === (true as any) ? this._per_page : +value;\n\n    if (Number.isNaN(_per_page) || _per_page <= 0 || parseInt(_per_page as any) !== _per_page) {\n      _per_page = this._per_page;\n    }\n    this._per_page = _per_page;\n  }\n\n  get sort(): string | null {\n    return this._sort;\n  }\n\n  private set sort(value: string | null) {\n    this._sort = value === null || value === undefined || value === '' ? null : `${value}`;\n  }\n\n  get sort_dir(): SortDirection | null {\n    return this._sort_dir;\n  }\n\n  private set sort_dir(value: SortDirection | null) {\n    if (!this.sort) {\n      this._sort_dir = null;\n      return;\n    }\n    const dir = `${value}`.toLowerCase();\n\n    this._sort_dir = dir !== 'asc' && dir !== 'desc' ? 'asc' : dir ;\n  }\n\n  get filter(): Filter | null {\n    return this._filter;\n  }\n\n  private set filter(value: Filter | null) {\n    this._filter = \n      value === null || value === undefined || (value as unknown) === '' \n        ? null \n        : (`${value}` as any);\n  }\n}    \n\n"],"names":["SearchParams","ValueObject","page","_page","value","Number","isNaN","parseInt","per_page","_per_page","sort","_sort","undefined","sort_dir","_sort_dir","dir","toLowerCase","filter","_filter","constructor","props"],"mappings":";;;;+BAYaA;;;eAAAA;;;6BAZe;AAYrB,IAAA,AAAMA,eAAN,MAAMA,qBAAsCC,wBAAW;IAgB5D,IAAIC,OAAO;QACT,OAAO,IAAI,CAACC,KAAK;IACnB;IACA,IAAYD,KAAKE,KAAa,EAAE;QAC9B,IAAID,QAAQ,CAACC;QACb,IAAIC,OAAOC,KAAK,CAACH,UAAUA,SAAS,KAAKI,SAASJ,WAAkBA,OAAO;YACzEA,QAAQ;QACV;QACA,IAAI,CAACA,KAAK,GAAGA;IAEf;IAEA,IAAIK,WAAW;QACb,OAAO,IAAI,CAACC,SAAS;IACvB;IAEA,IAAYD,SAASJ,KAAa,EAAE;QAClC,IAAIK,YAAYL,UAAW,OAAe,IAAI,CAACK,SAAS,GAAG,CAACL;QAE5D,IAAIC,OAAOC,KAAK,CAACG,cAAcA,aAAa,KAAKF,SAASE,eAAsBA,WAAW;YACzFA,YAAY,IAAI,CAACA,SAAS;QAC5B;QACA,IAAI,CAACA,SAAS,GAAGA;IACnB;IAEA,IAAIC,OAAsB;QACxB,OAAO,IAAI,CAACC,KAAK;IACnB;IAEA,IAAYD,KAAKN,KAAoB,EAAE;QACrC,IAAI,CAACO,KAAK,GAAGP,UAAU,QAAQA,UAAUQ,aAAaR,UAAU,KAAK,OAAO,CAAC,EAAEA,MAAM,CAAC;IACxF;IAEA,IAAIS,WAAiC;QACnC,OAAO,IAAI,CAACC,SAAS;IACvB;IAEA,IAAYD,SAAST,KAA2B,EAAE;QAChD,IAAI,CAAC,IAAI,CAACM,IAAI,EAAE;YACd,IAAI,CAACI,SAAS,GAAG;YACjB;QACF;QACA,MAAMC,MAAM,CAAC,EAAEX,MAAM,CAAC,CAACY,WAAW;QAElC,IAAI,CAACF,SAAS,GAAGC,QAAQ,SAASA,QAAQ,SAAS,QAAQA;IAC7D;IAEA,IAAIE,SAAwB;QAC1B,OAAO,IAAI,CAACC,OAAO;IACrB;IAEA,IAAYD,OAAOb,KAAoB,EAAE;QACvC,IAAI,CAACc,OAAO,GACVd,UAAU,QAAQA,UAAUQ,aAAa,AAACR,UAAsB,KAC5D,OACC,CAAC,EAAEA,MAAM,CAAC;IACnB;IAjEAe,YAAYC,QAA8C,CAAC,CAAC,CAAE;QAC5D,KAAK;aANGX,YAAoB;QAO5B,IAAI,CAACP,IAAI,GAAGkB,MAAMlB,IAAI;QACtB,IAAI,CAACM,QAAQ,GAAGY,MAAMZ,QAAQ;QAC9B,IAAI,CAACE,IAAI,GAAGU,MAAMV,IAAI;QACtB,IAAI,CAACG,QAAQ,GAAGO,MAAMP,QAAQ;QAC9B,IAAI,CAACI,MAAM,GAAGG,MAAMH,MAAM;IAC5B;AA2DF"}