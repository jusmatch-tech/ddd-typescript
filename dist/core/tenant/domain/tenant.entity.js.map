{"version":3,"sources":["../../../../src/core/tenant/domain/tenant.entity.ts"],"sourcesContent":["import { Uuid } from \"../../shared/domain/value-objects/uuid.vo\";\nimport { TenantValidatorFactory } from './tenant.validator';\nimport { EntityValidationError } from '../../shared/domain/validators/validation.error';\nimport { Entity } from '../../shared/domain/entity';\nimport { ValueObject } from \"../../shared/domain/value-object\";\nimport { TenantFakeBuilder } from \"./tenant-fake.builders\";\n\nexport type TenantConstructorProps = {\n  tenant_id?: Uuid;\n  name: string;\n  description?: string | null;\n  is_active?: boolean;\n  created_at?: Date;\n  updated_at?: Date;\n};\n\nexport type TenantCreateCommand = {\n  name: string;\n  description?: string | null;\n  is_active?: boolean;\n};\n\n\nexport class Tenant extends Entity {\n  tenant_id: Uuid;\n  name: string;\n  description: string | null;\n  is_active: boolean;\n  created_at: Date;\n  updated_at: Date;\n\n  constructor(props: TenantConstructorProps) {\n    super();\n    this.tenant_id = props.tenant_id ?? new Uuid();\n    this.name = props.name;\n    this.description = props.description ?? null;\n    this.is_active = props.is_active ?? true;\n    this.created_at = props.created_at ?? new Date();\n    this.updated_at = props.updated_at ?? new Date();\n  }\n\n  get entity_id(): ValueObject {\n    return this.tenant_id;\n  }\n\n  static create(props: TenantCreateCommand): Tenant {\n    const tenant = new Tenant(props);\n    tenant.validate(['name']);\n    return tenant;\n  }\n  changeName(name: string): void {\n    this.name = name;\n    this.validate(['name']);\n\n  }\n\n  changeDescription(description: string): void {\n    this.description = description;\n    this.validate(['name']);\n  } \n\n  activate(): void {\n    this.is_active = true;\n  }\n\n  deactivate(): void {\n    this.is_active = false;\n  }\n\n  validate(fields?: string[]){\n    const validator = TenantValidatorFactory.create();\n    return validator.validate(this.notification, this, fields);\n  }\n\n  static fake() {\n    return TenantFakeBuilder;\n  }\n\n  toJSON() {\n    return {\n      tenant_id: this.tenant_id.id,\n      name: this.name,\n      description: this.description,\n      is_active: this.is_active,\n      created_at: this.created_at,\n      updated_at: this.updated_at,\n    };\n  }\n}"],"names":["Tenant","Entity","entity_id","tenant_id","create","props","tenant","validate","changeName","name","changeDescription","description","activate","is_active","deactivate","fields","validator","TenantValidatorFactory","notification","fake","TenantFakeBuilder","toJSON","id","created_at","updated_at","constructor","Uuid","Date"],"mappings":";;;;+BAuBaA;;;eAAAA;;;wBAvBQ;iCACkB;wBAEhB;oCAEW;AAkB3B,IAAA,AAAMA,SAAN,MAAMA,eAAeC,cAAM;IAkBhC,IAAIC,YAAyB;QAC3B,OAAO,IAAI,CAACC,SAAS;IACvB;IAEA,OAAOC,OAAOC,KAA0B,EAAU;QAChD,MAAMC,SAAS,IAAIN,OAAOK;QAC1BC,OAAOC,QAAQ,CAAC;YAAC;SAAO;QACxB,OAAOD;IACT;IACAE,WAAWC,IAAY,EAAQ;QAC7B,IAAI,CAACA,IAAI,GAAGA;QACZ,IAAI,CAACF,QAAQ,CAAC;YAAC;SAAO;IAExB;IAEAG,kBAAkBC,WAAmB,EAAQ;QAC3C,IAAI,CAACA,WAAW,GAAGA;QACnB,IAAI,CAACJ,QAAQ,CAAC;YAAC;SAAO;IACxB;IAEAK,WAAiB;QACf,IAAI,CAACC,SAAS,GAAG;IACnB;IAEAC,aAAmB;QACjB,IAAI,CAACD,SAAS,GAAG;IACnB;IAEAN,SAASQ,MAAiB,EAAC;QACzB,MAAMC,YAAYC,uCAAsB,CAACb,MAAM;QAC/C,OAAOY,UAAUT,QAAQ,CAAC,IAAI,CAACW,YAAY,EAAE,IAAI,EAAEH;IACrD;IAEA,OAAOI,OAAO;QACZ,OAAOC,qCAAiB;IAC1B;IAEAC,SAAS;QACP,OAAO;YACLlB,WAAW,IAAI,CAACA,SAAS,CAACmB,EAAE;YAC5Bb,MAAM,IAAI,CAACA,IAAI;YACfE,aAAa,IAAI,CAACA,WAAW;YAC7BE,WAAW,IAAI,CAACA,SAAS;YACzBU,YAAY,IAAI,CAACA,UAAU;YAC3BC,YAAY,IAAI,CAACA,UAAU;QAC7B;IACF;IAxDAC,YAAYpB,KAA6B,CAAE;QACzC,KAAK;QACL,IAAI,CAACF,SAAS,GAAGE,MAAMF,SAAS,IAAI,IAAIuB,YAAI;QAC5C,IAAI,CAACjB,IAAI,GAAGJ,MAAMI,IAAI;QACtB,IAAI,CAACE,WAAW,GAAGN,MAAMM,WAAW,IAAI;QACxC,IAAI,CAACE,SAAS,GAAGR,MAAMQ,SAAS,IAAI;QACpC,IAAI,CAACU,UAAU,GAAGlB,MAAMkB,UAAU,IAAI,IAAII;QAC1C,IAAI,CAACH,UAAU,GAAGnB,MAAMmB,UAAU,IAAI,IAAIG;IAC5C;AAiDF"}