{"version":3,"sources":["../../../../../../../src/core/tenant/application/use-case/delete-tenant/__tests__/delete-tenant.use-case.int-spec.ts"],"sourcesContent":["import { NotFoundError } from \"../../../../../shared/domain/errors/not-found.error\";\nimport { setupSequelize } from \"../../../../../shared/infra/testing/helpers\";\nimport { Tenant } from \"../../../../domain/tenant.entity\";\nimport { TenantSequelizeRepository } from \"../../../../infra/db/sequelize/tenant-sequelize.repository\";\nimport { TenantModel } from \"../../../../infra/db/sequelize/tenant.model\";\nimport { DeleteTenantUseCase } from \"../delete-tenant.use-case\";\n\ndescribe('UpdateTenantUseCase Integration tests', () => {\n  let useCase: DeleteTenantUseCase;\n  let repository: TenantSequelizeRepository;\n\n  setupSequelize( {models: [TenantModel]});\n\n  beforeEach(() => {\n    repository = new TenantSequelizeRepository(TenantModel);\n    useCase = new DeleteTenantUseCase(repository);\n  });\n\n  it('Should Throw error when entity not found', async () => { \n    const input = {\n      id: 'f0b8b6c4-aae6-4a0d-8d6e-6d8b1a8c8e4a',\n      name: 'new name'\n    };\n    await expect(useCase.execute(input)).rejects.toThrow(new NotFoundError(input.id, Tenant)); \n  });\n  \n  it('Should delete an Tenant', async () => {\n    const entity = Tenant.fake().aTenant().build();\n    await repository.insert(entity);\n\n    await useCase.execute({\n      id: entity.tenant_id.id,\n    });\n\n    const hasNoModel = await repository.findById(entity.tenant_id);\n    expect(hasNoModel).toBeNull();\n  });\n});"],"names":["describe","useCase","repository","setupSequelize","models","TenantModel","beforeEach","TenantSequelizeRepository","DeleteTenantUseCase","it","input","id","name","expect","execute","rejects","toThrow","NotFoundError","Tenant","entity","fake","aTenant","build","insert","tenant_id","hasNoModel","findById","toBeNull"],"mappings":";;;;+BAA8B;yBACC;8BACR;2CACmB;6BACd;qCACQ;AAEpCA,SAAS,yCAAyC;IAChD,IAAIC;IACJ,IAAIC;IAEJC,IAAAA,uBAAc,EAAE;QAACC,QAAQ;YAACC,wBAAW;SAAC;IAAA;IAEtCC,WAAW;QACTJ,aAAa,IAAIK,oDAAyB,CAACF,wBAAW;QACtDJ,UAAU,IAAIO,wCAAmB,CAACN;IACpC;IAEAO,GAAG,4CAA4C;QAC7C,MAAMC,QAAQ;YACZC,IAAI;YACJC,MAAM;QACR;QACA,MAAMC,OAAOZ,QAAQa,OAAO,CAACJ,QAAQK,OAAO,CAACC,OAAO,CAAC,IAAIC,4BAAa,CAACP,MAAMC,EAAE,EAAEO,oBAAM;IACzF;IAEAT,GAAG,2BAA2B;QAC5B,MAAMU,SAASD,oBAAM,CAACE,IAAI,GAAGC,OAAO,GAAGC,KAAK;QAC5C,MAAMpB,WAAWqB,MAAM,CAACJ;QAExB,MAAMlB,QAAQa,OAAO,CAAC;YACpBH,IAAIQ,OAAOK,SAAS,CAACb,EAAE;QACzB;QAEA,MAAMc,aAAa,MAAMvB,WAAWwB,QAAQ,CAACP,OAAOK,SAAS;QAC7DX,OAAOY,YAAYE,QAAQ;IAC7B;AACF"}