{"version":3,"sources":["../../../../../../../src/core/tenant/application/use-case/delete-tenant/__tests__/delete-tenant.use-case.spec.ts"],"sourcesContent":["import { NotFoundError } from \"../../../../../shared/domain/errors/not-found.error\";\nimport { InvalidUuidError } from \"../../../../../shared/domain/value-objects/uuid.vo\";\nimport { Tenant } from \"../../../../domain/tenant.entity\";\nimport { TenantInMemoryRepository } from \"../../../../infra/db/in-memory/tenant-in-memory.repository\";\nimport { DeleteTenantUseCase } from \"../delete-tenant.use-case\";\n\ndescribe('DeleteTenantUseCase Unit tests', () => {\n  let useCase: DeleteTenantUseCase;\n  let repository: TenantInMemoryRepository;\n\n  beforeEach(() => {\n    repository = new TenantInMemoryRepository();\n    useCase = new DeleteTenantUseCase(repository);\n  });\n  \n  it('should throw error when entity not found - invalid UUID', async () => {\n    const input = {\n      id: 'invalid-uuid',\n    };\n    await expect(useCase.execute(input)).rejects.toThrow(new InvalidUuidError());\n  });\n\n  it('should throw error when entity not found - valid UUID', async () => {\n    const input = {\n      id: 'f0b8b6c4-aae6-4a0d-8d6e-6d8b1a8c8e4a',\n    };\n    await expect(useCase.execute(input)).rejects.toThrow(new NotFoundError(input.id, Tenant));\n\n  });\n\n  it('should delete entity - valid UUID', async () => {\n    const spyDelete = jest.spyOn(repository, 'delete');\n    const entity = new Tenant({\n      name: 'name',\n    });\n    repository.items = [entity];\n\n    let output = await useCase.execute({\n      id: entity.tenant_id.id,\n    });\n\n    expect(spyDelete).toHaveBeenCalledTimes(1);\n    expect(output).toBeUndefined();\n\n    const hasNoModel = await repository.findById(entity.tenant_id);\n    expect(hasNoModel).toBeNull();\n\n  });\n\n});"],"names":["describe","useCase","repository","beforeEach","TenantInMemoryRepository","DeleteTenantUseCase","it","input","id","expect","execute","rejects","toThrow","InvalidUuidError","NotFoundError","Tenant","spyDelete","jest","spyOn","entity","name","items","output","tenant_id","toHaveBeenCalledTimes","toBeUndefined","hasNoModel","findById","toBeNull"],"mappings":";;;;+BAA8B;wBACG;8BACV;0CACkB;qCACL;AAEpCA,SAAS,kCAAkC;IACzC,IAAIC;IACJ,IAAIC;IAEJC,WAAW;QACTD,aAAa,IAAIE,kDAAwB;QACzCH,UAAU,IAAII,wCAAmB,CAACH;IACpC;IAEAI,GAAG,2DAA2D;QAC5D,MAAMC,QAAQ;YACZC,IAAI;QACN;QACA,MAAMC,OAAOR,QAAQS,OAAO,CAACH,QAAQI,OAAO,CAACC,OAAO,CAAC,IAAIC,wBAAgB;IAC3E;IAEAP,GAAG,yDAAyD;QAC1D,MAAMC,QAAQ;YACZC,IAAI;QACN;QACA,MAAMC,OAAOR,QAAQS,OAAO,CAACH,QAAQI,OAAO,CAACC,OAAO,CAAC,IAAIE,4BAAa,CAACP,MAAMC,EAAE,EAAEO,oBAAM;IAEzF;IAEAT,GAAG,qCAAqC;QACtC,MAAMU,YAAYC,KAAKC,KAAK,CAAChB,YAAY;QACzC,MAAMiB,SAAS,IAAIJ,oBAAM,CAAC;YACxBK,MAAM;QACR;QACAlB,WAAWmB,KAAK,GAAG;YAACF;SAAO;QAE3B,IAAIG,SAAS,MAAMrB,QAAQS,OAAO,CAAC;YACjCF,IAAIW,OAAOI,SAAS,CAACf,EAAE;QACzB;QAEAC,OAAOO,WAAWQ,qBAAqB,CAAC;QACxCf,OAAOa,QAAQG,aAAa;QAE5B,MAAMC,aAAa,MAAMxB,WAAWyB,QAAQ,CAACR,OAAOI,SAAS;QAC7Dd,OAAOiB,YAAYE,QAAQ;IAE7B;AAEF"}