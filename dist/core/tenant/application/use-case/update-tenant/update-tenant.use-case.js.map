{"version":3,"sources":["../../../../../../src/core/tenant/application/use-case/update-tenant/update-tenant.use-case.ts"],"sourcesContent":["import { IUseCase } from '../../../../shared/application/use-case.interface';\nimport { NotFoundError } from '../../../../shared/domain/errors/not-found.error';\nimport { Uuid } from '../../../../shared/domain/value-objects/uuid.vo';\nimport { Tenant } from '../../../domain/tenant.entity';\nimport { ITenantRepository } from '../../../domain/tenant.repository';\nimport { TenantOutput, TenantOutputMapper } from '../common/tenant-output';\nimport { UpdateTenantInput } from './update-tenant.input';\n\nexport class UpdateTenantUseCase\n  implements IUseCase<UpdateTenantInput, UpdateTenantOutput>\n{\n  constructor(private readonly tenantRepo: ITenantRepository) {}\n\n  async execute(input: UpdateTenantInput): Promise<UpdateTenantOutput> {\n    const uuid = new Uuid(input.id);\n    const entity = await this.tenantRepo.findById(uuid);\n\n    if (!entity) {\n      throw new NotFoundError(input.id, Tenant);\n    }\n\n    input.name && entity.changeName(input.name);\n\n    if (input.description !== undefined) {\n      entity.changeDescription(input.description);\n    }\n    if (input.is_active === true) {\n      entity.activate();\n    }\n    if (input.is_active === false) {\n      entity.deactivate();\n    }\n    await this.tenantRepo.update(entity);\n\n    return TenantOutputMapper.toOutput(entity);\n  }\n}\n\nexport type UpdateTenantOutput = TenantOutput;\n"],"names":["UpdateTenantUseCase","execute","input","uuid","Uuid","id","entity","tenantRepo","findById","NotFoundError","Tenant","name","changeName","description","undefined","changeDescription","is_active","activate","deactivate","update","TenantOutputMapper","toOutput","constructor"],"mappings":";;;;+BAQaA;;;eAAAA;;;+BAPiB;wBACT;8BACE;8BAE0B;AAG1C,IAAA,AAAMA,sBAAN,MAAMA;IAKX,MAAMC,QAAQC,KAAwB,EAA+B;QACnE,MAAMC,OAAO,IAAIC,YAAI,CAACF,MAAMG,EAAE;QAC9B,MAAMC,SAAS,MAAM,IAAI,CAACC,UAAU,CAACC,QAAQ,CAACL;QAE9C,IAAI,CAACG,QAAQ;YACX,MAAM,IAAIG,4BAAa,CAACP,MAAMG,EAAE,EAAEK,oBAAM;QAC1C;QAEAR,MAAMS,IAAI,IAAIL,OAAOM,UAAU,CAACV,MAAMS,IAAI;QAE1C,IAAIT,MAAMW,WAAW,KAAKC,WAAW;YACnCR,OAAOS,iBAAiB,CAACb,MAAMW,WAAW;QAC5C;QACA,IAAIX,MAAMc,SAAS,KAAK,MAAM;YAC5BV,OAAOW,QAAQ;QACjB;QACA,IAAIf,MAAMc,SAAS,KAAK,OAAO;YAC7BV,OAAOY,UAAU;QACnB;QACA,MAAM,IAAI,CAACX,UAAU,CAACY,MAAM,CAACb;QAE7B,OAAOc,gCAAkB,CAACC,QAAQ,CAACf;IACrC;IAxBAgB,YAAY,AAAiBf,UAA6B,CAAE;aAA/BA,aAAAA;IAAgC;AAyB/D"}